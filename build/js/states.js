"use strict";var bootState={create:function(){game.device.desktop||(game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,document.body.style.backgroundColor="#ffffff",game.scale.minHeight=186,game.scale.minWidth=186,game.scale.maxHeight=560,game.scale.maxWidth=560,game.scale.pageAlignHorizontally=!0,game.scale.pageAlignVertically=!0,game.scale.updateLayout(!0)),game.state.start("load")}},loadState={preload:function(){game.load.path="images/",game.load.images(["background","level-background","x","o","cell"])},create:function(){game.state.start("menu")}},menuState={create:function(){game.add.image(0,0,"background"),game.add.text(game.world.centerX,200,"Tic Tac Toe",{font:"50px Arial",fill:"#ffffff"}).anchor.setTo(.5,.5),game.add.text(game.world.centerX,250,"click to start",{font:"20px Arial",fill:"#ffffff"}).anchor.setTo(.5,.5),game.input.onDown.add(this.startGame,this)},startGame:function(){game.state.start("play")}},playState={create:function(){game.add.sprite(0,0,"level-background"),this.x=0,this.playerCanSetX=!0,this.cellWidth=186,this.cellHeight=186,this.template=this.get2dArray(3,3,0),this.playerCanSetX?game.input.onDown.add(this.setX,this):game.input.onDown.add(this.setO,this)},get2dArray:function(t,a,e){return Array(t).fill().map(function(){return Array(a).fill(e)})},setX:function(){var t=Math.floor(game.input.x/this.cellWidth),a=Math.floor(game.input.y/this.cellHeight);this.playerCanSetX&&!this.template[a][t]&&(this.template[a][t]="x",game.add.image(t*this.cellWidth,a*this.cellHeight,"x"),this.x+=1,this.checkMatch(),this.x<=4&&this.setO())},setO:function(){function t(){a=Math.floor(3*Math.random()),e=Math.floor(3*Math.random())}this.playerCanSetX=!1;var a=void 0,e=void 0;for(t();this.template[a][e];)t();this.template[a][e]="o",game.add.image(e*this.cellWidth,a*this.cellHeight,"o"),this.checkMatch(),this.playerCanSetX=!0},checkMatch:function(){for(var t=this.template,a=0;a<=2;a++)t[a][0]&&t[a][0]===t[a][1]&&t[a][1]===t[a][2]&&("x"===t[a][0]?game.state.start("win"):game.state.start("lose"));for(var e=0;e<=2;e++)t[0][e]&&t[0][e]===t[1][e]&&t[1][e]===t[2][e]&&("x"===t[0][e]?game.state.start("win"):game.state.start("lose"));t[0][0]&&t[0][0]===t[1][1]&&t[1][1]===t[2][2]?"x"===t[0][0]?game.state.start("win"):game.state.start("lose"):t[0][2]&&t[0][2]===t[1][1]&&t[1][1]===t[2][0]&&("x"===t[0][2]?game.state.start("win"):game.state.start("lose")),5===this.x&&game.state.start("draw")}},winState={create:function(){game.stage.backgroundColor="#000000",game.add.text(game.world.centerX,200,"You won! You won!",{font:"50px Arial",fill:"#ffffff"}).anchor.setTo(.5,.5),game.add.text(game.world.centerX,250,"click to start",{font:"20px Arial",fill:"#ffffff"}).anchor.setTo(.5,.5),game.input.onDown.add(this.startGame,this)},startGame:function(){game.state.start("play")}},loseState={create:function(){game.stage.backgroundColor="#000000",game.add.text(game.world.centerX,200,"Loser, you play like my dead cat!",{font:"50px Arial",fill:"#ffffff"}).anchor.setTo(.5,.5),game.add.text(game.world.centerX,250,"click to start",{font:"20px Arial",fill:"#ffffff"}).anchor.setTo(.5,.5),game.input.onDown.add(this.startGame,this)},startGame:function(){game.state.start("play")}},drawState={create:function(){game.stage.backgroundColor="#000000",game.add.text(game.world.centerX,200,"Ok",{font:"50px Arial",fill:"#ffffff"}).anchor.setTo(.5,.5),game.add.text(game.world.centerX,250,"click to start",{font:"20px Arial",fill:"#ffffff"}).anchor.setTo(.5,.5),game.input.onDown.add(this.startGame,this)},startGame:function(){game.state.start("play")}},game=new Phaser.Game(560,560,Phaser.AUTO);game.state.add("boot",bootState),game.state.add("load",loadState),game.state.add("menu",menuState),game.state.add("play",playState),game.state.add("win",winState),game.state.add("lose",loseState),game.state.add("draw",drawState),game.state.start("boot");